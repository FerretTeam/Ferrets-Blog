<div class='home-layout'>
  <!-- 用户没有创建任何文章时的欢迎界面 -->
  <md-card *ngIf='articles.length == 0' class='welcome-container'>
    <div class='title'>嘿，新朋友</div>
    <div class='sub-title'>欢迎来到 Ferrets 博客！</div>
    <div class='introduction flex-container' fxLayout.gt-sm='row' fxLayout='column'>
      <div class='flex-item' fxFlex='30'>
        <div class='intro-title'>
          <md-icon>motorcycle</md-icon>
          <span class='intro-title-text'>高效地创作</span>
        </div>
        <p>Markdown 是一种轻量级标记语言，创始人为约翰·格鲁伯。这种语言吸收了很多在电子邮件中已有的纯文本标记的特性。</p>
      </div>
      <div class='flex-item' fxFlex='5' fxHide.sm></div>
      <div class='flex-item' fxFlex='30'>
        <div class='intro-title'>
          <md-icon>textsms</md-icon>
          <span class='intro-title-text'>思维的碰撞</span>
        </div>
        <p>John Gruber 在 2004 年创造了 Markdown 语言，在语法上有很大一部分是跟 Aaron Swartz 共同合作的。</p>
      </div>
      <div class='flex-item' fxFlex='5' fxHide.sm></div>
      <div class='flex-item' fxFlex='30'>
        <div class='intro-title'>
          <md-icon>share</md-icon>
          <span class='intro-title-text'>便捷地分享</span>
        </div>
        <p>它允许人们“使用易读易写的纯文本格式编写文档，然后转换成有效的XHTML(或者HTML)文档”。</p>
      </div>
    </div>
  </md-card>

  <div class='articles-container' *ngIf='articles.length != 0'>
    <!-- 在非窄屏上显示的文章界面 -->
    <div fxHide.xs>
      <md-card *ngFor='let article of articles'>
        <!-- 有图片的 card 标题 -->
        <div *ngIf='article.image' class='article-image' [style.background-image]="'url(' + article.image + ')'">
          <div class='article-image-shadow'>
            <span class='article-image-title'>{{article.title}}</span>
          </div>
        </div>
        <!-- 无图片的 card 标题 -->
        <div *ngIf='article.image == null' class='article-title'>
          <span>{{article.title}}</span>
        </div>
        <md-card-content>
          <span class='article-date'>{{getDateString(article.date)}}</span>
          <p class='article-synopsis'>{{article.synopsis}}</p>
        </md-card-content>
        <md-card-actions>
          <button md-icon-button (click)='gotoEdit(article.title)' mdTooltip='修改文章'>
            <md-icon>create</md-icon>
          </button>
          <button md-icon-button mdTooltip='分享文章'>
            <md-icon>share</md-icon>
          </button>
          <button md-button (click)='gotoArticle(article.title)' class='article-read-more' md-raised-button>阅读全文</button>
        </md-card-actions>
      </md-card>

      <div class='page-controller'>
        <button *ngIf='pageNumber > 1' md-icon-button class='page-button' (click)='turnPage(pageNumber - 1)'>
          <md-icon>arrow_back</md-icon>
        </button>
        <span *ngFor='let number of localPageNumbers'>
          <button *ngIf='number != pageNumber' md-icon-button class='page-button page-number' (click)='turnPage(number)'>
            {{number}}
          </button>
          <button *ngIf='number == pageNumber' md-icon-button class='page-button page-number selected-page'>
            {{number}}
          </button>
        </span>
        <button *ngIf='pageNumber < maxPageNumber' md-icon-button class='page-button' (click)='turnPage(pageNumber + 1)'>
          <md-icon>arrow_forward</md-icon>
        </button>
      </div>
    </div>

    <!-- 在窄屏上显示的文章界面 -->
    <div fxHide.gt-xs>
      <md-card>
        <div *ngFor='let article of articles' class='m-articles-container' (click)='gotoArticle(article.title)'>
          <!-- 有图片的 card 模板 -->
          <div *ngIf='article.image' class='flex-container m-article-container' fxLayout='row'>
            <div class='flex-item m-article-content-container' fxFlex='61.8%'>
              <span>{{article.title}}</span>
              <p class='m-article-date'>{{getDateString(article.date)}}</p>
            </div>
            <div class='flex-item m-article-image-container' fxFlex>
              <div class='m-article-image' [style.background-image]="'url(' + article.image + ')'"></div>
            </div>
          </div>
          <!-- 无图片的 card 模板 -->
          <div *ngIf='article.image == null' class='m-article-content-container'>
            <span>{{article.title}}</span>
            <p class='m-article-date'>{{getDateString(article.date)}}</p>
            <p class='m-article-synopsis'>{{article.synopsis}}</p>
          </div>
        </div>
      </md-card>
      <div class='page-controller'>
        <button *ngIf='pageNumber > 1' md-icon-button class='m-page-button' (click)='turnPage(pageNumber - 1)'>
          <md-icon>arrow_back</md-icon>
        </button>
        <span class='m-page-number'>第 {{pageNumber}} 页</span>
        <button *ngIf='pageNumber < maxPageNumber' md-icon-button class='m-page-button' (click)='turnPage(pageNumber + 1)'>
          <md-icon>arrow_forward</md-icon>
        </button>
      </div>
    </div>
  </div>

  <div class='tags-container' *ngIf='articles.length != 0'>
    <md-card class='tag'>
      <div class='tag-title'><span>最热文章</span></div>
      <button md-button class='tag-list-button' *ngFor='let article of popArticles' (click)='gotoArticle(article.title)'>{{article.title}}</button>
      <div class='tag-footer'></div>
    </md-card>
    <md-card class='tag'>
      <div class='tag-title'>
        <span>标 签</span>
      </div>
      <md-card-content>
        <md-chip-list>
          <md-chip *ngFor='let tag of tags'>{{tag.tagName}}</md-chip>
        </md-chip-list>
      </md-card-content>
    </md-card>
  </div>
</div>
